/*! frames (v0.1.1),
 Front-end framework,
 by Sasha Koss <kossnocorp@gmail.com>
 Tue Jul 15 2014 */
(function(){var t;t={},null==window.modula&&(window.modula={"export":function(e,r){return t[e]=r},require:function(e){var r;if(r=t[e])return r;throw"Module '"+e+"' not found."}})}).call(this),function(){var t={}.hasOwnProperty,e=[].slice;this.Frames=function(){function r(){}return r.Extendables={},r.createExtendables=function(){var e,r,n,o;null==this.extendables&&(this.extendables={}),n=this.Extendables,o=[];for(r in n)if(t.call(n,r)){if(e=n[r],!Object.isFunction(e.prototype.extended))throw"Trying to initialize extendable module, but #extended method is not specified for it.";o.push(this.extendables[r.underscore()]=new e)}return o},r.extend=function(){var t,r,n;if(r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],null==this.extendables[r])throw"Trying to extend module "+r.camelize()+", but it is not registered.";return(n=this.extendables[r]).extended.apply(n,t)},r.registerLauncher=function(t){return this.__launcher=new t},r.hook=function(t,e){if(!this.__launcher)throw"Launcher is not registered";return this.__launcher.hook(t,e)},r.start=function(){var e,r,n,o;n=this.extendables,o=[];for(r in n)t.call(n,r)&&(e=n[r],o.push("function"==typeof e.ready?e.ready():void 0));return o},r.stop=function(){},r}(),modula["export"]("frames",Frames)}.call(this),function(){var t,e,r,n,o,i,s,u=[].slice;for(e=modula.require("frames"),t=window.Echo,r="debug info warn error".split(" "),n={included:function(e){return null==this.echo&&(this.echo=t()),e.extend(this)},log:function(t,e){return null==e&&(e={}),this.logger(t,e)},logger:function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],n.echo.apply(n,t)}},i=0,s=r.length;s>i;i++)o=r[i],n[o]=function(t,e){return this.log(t,Object.extended(e).clone().merge({level:o}))};modula["export"]("frames/logger_module",n)}.call(this),function(){var t,e,r,n,o,i,s;for(e=modula.require("frames"),r=modula.require("frames/logger_module"),t=window.Backbone,this.Class=function(){function t(){}return t.include=function(t){return Object.merge(this.prototype,Object.reject(t,"included","extended")),t.included?t.included(this):void 0},t.extend=function(t){return Object.merge(this,Object.reject(t,"included","extended")),t.extended?t.extended(this):void 0},t.attr=function(t,e){return null==e&&(e={}),this.attrReader(t,e),this.attrWriter(t,e)},t.attrReader=function(t,e){var r;return null==e&&(e={}),r=this.__privateNameFor(t),this.prototype[this.__getterNameFor(t,e)]=function(){return this[r]}},t.attrWriter=function(t,e){var r;return null==e&&(e={}),r=this.__privateNameFor(t),this.prototype[this.__setterNameFor(t,e)]=function(t){return this[r]=t},e.boolean&&(e["true"]&&(this.prototype[e["true"]]=function(){return this[r]=!0}),e["false"])?this.prototype[e["false"]]=function(){return this[r]=!1}:void 0},t.patch=function(t){return Object.merge(t,this),Object.merge(t.prototype,this.prototype)},t.__getterNameFor=function(t,e){return null==e&&(e={}),e.getter||this.__fnName(t,{prefix:e.boolean?"is":"get"})},t.__setterNameFor=function(t,e){return null==e&&(e={}),e.setter||this.__fnName(t,{prefix:"set"})},t.__privateNameFor=function(t){return"__"+t},t.__fnName=function(t,e){var r;return null==e&&(e={}),r=[],e.prefix&&r.push(e.prefix),r.push(t),r.join("_").camelize(!1)},t.include(r),t}(),s="View Model Collection Router".split(" "),o=0,i=s.length;i>o;o++)n=s[o],Class.patch(t[n]);modula["export"]("frames/class",Class)}.call(this),function(){var t,e;t=modula.require("frames"),e=function(){function t(t,e){var r,n,o,i;if(null==t&&(t=null),null==e&&(e={}),null==this.states&&(this.states=[]),null!=e.states)for(i=e.states,n=0,o=i.length;o>n;n++)r=i[n],this.states.push(r);null!=e.events&&(this.events=e.events),null!=t&&(this.states.push(t),this["default"]=t),this.__rules={},this.__defineEvents(),this.__forceSet(this.__default())}return t.prototype.get=function(){return this.__state},t.prototype.set=function(t){var e;if(!this.__isStateDefined(t))throw"No such state '"+t+"'";if(!this.__isTransitionAllowed(t))throw"Transition from '"+this.get()+"' to '"+t+"' is not allowed";return e=this.__callbackFor(t),"function"==typeof e&&e(this.get(),t),this.__state=t},t.prototype.reset=function(){return"function"==typeof this.onReset&&this.onReset(this.get(),this.__default()),this.__forceSet(this.__default())},t.prototype.availableStates=function(){return this.states},t.prototype.__forceSet=function(t){this.__state=t},t.prototype.__default=function(){return this["default"]||this.states[0]},t.prototype.__defineEvents=function(){var t,e,r,n;r=this.events,n=[];for(t in r)e=r[t],n.push(this.__defineEvent(t,e));return n},t.prototype.__defineEvent=function(t,e){return this.__applyRules(t,e),this[t]=function(){return this.set(e.to)}},t.prototype.__applyRules=function(t,e){var r,n,o,i,s,u;for(r="object"==typeof e.from?e.from:[e.from],u=[],i=0,s=r.length;s>i;i++)n=r[i],null==(o=this.__rules)[n]&&(o[n]=[]),u.push(this.__rules[n].push(e.to));return u},t.prototype.__isStateDefined=function(t){return-1!==this.states.indexOf(t)},t.prototype.__isTransitionAllowed=function(t){var e;return e=this.__rules[this.get()],e&&-1!==e.indexOf(t)},t.prototype.__callbackFor=function(t){var e;return e=("on_"+t).camelize(!1),this[e]},t}(),modula["export"]("frames/state",e)}.call(this),function(){var t,e=[].slice;t=modula.require("frames"),t.Extendables.RoutersFactory=function(){function t(){this.routersFactory=modula.require("frames/routers_factory")}return t.prototype.extended=function(){var t,r;return t=1<=arguments.length?e.call(arguments,0):[],r=t[0],this.routersFactory=r},t.prototype.ready=function(){return this.routersFactory.create()},t}(),modula["export"]("frames/extendables/routersFactory",t.Extendables.RoutersFactory)}.call(this),function(){var t,e=[].slice;t=modula.require("frames"),t.Extendables.ViewsFactory=function(){function t(){this.viewsFactory=modula.require("frames/views_factory")}return t.prototype.extended=function(){var t,r;return t=1<=arguments.length?e.call(arguments,0):[],r=t[0],this.viewsFactory=r},t.prototype.ready=function(){return this.viewsFactory.create()},t}(),modula["export"]("frames/extendables/views_factory",t.Extendables.ViewsFactory)}.call(this),function(){var t,e,r,n,o={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=modula.require("frames"),e=modula.require("frames/class"),t=window.Backbone,n=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}var n;return i(r,e),n="[data-router]",r.create=function(){var e,r,n,o;return o=this.detectRouter(),o&&(n=o.camelize()+"Router",e=window[n])?(r=new e,$("body").data({router:r}),t.history.start(),this.router=r):void 0},r.destroy=function(){return $("body").removeData("router"),t.history.stop()},r.detectRouter=function(){var t;return t=this.routers(),t.length>1&&this.warn("There are more than one router, all except first will be ignored."),t[0]},r.routers=function(){var t,e;return e=$("body"),t=e.find(n).add(e.filter(n)),t.map(function(){return $(this).data("router")}).toArray()},r}(e),modula["export"]("frames/routers_factory",n)}.call(this),function(){var t,e,r,n={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};e=modula.require("frames"),t=modula.require("frames/class"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}var r,n,i,s;return o(e,t),n="[data-view]",r="body",i=/\s/,s=/(.+)#(.+)/,e.create=function(t,e){return null==t&&(t=$(r)),null==e&&(e=!0),this.$viewEls(t,e).each(function(t){return function(e,r){return t.createViewsForEl($(r))}}(this))},e.createViewsForEl=function(t){var e,r,n,o,s,u,a,c;for(e=$(t),e.data("created-views")||e.data("created-views",{}),s=e.data("view").split(i),c=[],u=0,a=s.length;a>u;u++)r=s[u],o=this.expandViewPath(r),e.data("created-views")[o]?c.push(void 0):(n=this.initializeView(o,{el:e}),c.push(e.data("created-views")[o]=n));return c},e.destroy=function(t,e){return null==t&&(t=$(r)),null==e&&(e=!0),this.$viewEls(t,e).each(function(t){return function(e,r){return t.destroyViewsForEl($(r))}}(this))},e.destroyViewsForEl=function(t){var e,r,n,o;if(e=$(t),r=e.data("created-views")){for(o in r)n=r[o],n.remove();return e.removeData("created-views")}},e.expandViewPath=function(t){return s.test(t)?t:"shared#"+t},e.initializeView=function(t,e){var r;return r=this.getViewClass(t),r?new r(e):void 0},e.getViewClass=function(t){var e,r,n,o,i,u,a,c;return c=t.match(s),a=c[0],o=c[1],u=c[2],n=this.getComponentClassName(o),i=this.getViewClassName(u),e=window[n],e&&(r=e[i])?r:void 0},e.getComponentClassName=function(t){return t?t.camelize()+"Component":void 0},e.getViewClassName=function(t){return t&&t?t.camelize()+"View":void 0},e.$viewEls=function(t,e){var r;return null==e&&(e=!0),r=t.find(n),e?r.add(t.filter(n)):r},e}(t),modula["export"]("frames/views_factory",r)}.call(this),function(){var t,e;t=modula.require("frames"),e={included:function(t){return t.addToConfigureChain("buildQueryFunctions")},buildQueryFunctions:function(){var t,e,r,n;if(this.els){r=this.els,n=[];for(e in r)t=r[e],n.push(function(t){return function(e,r){var n,o,i,s,u,a;return a=r.match(/^(cached)?\s?(.+)/),u=a[0],o=a[1],s=a[2],o?(i="__"+e,n=(""+e+"_drop").camelize(),t[e]=function(){return this[i]||(this[i]=this.$(s))},t[n]=function(){return this[i]=void 0}):t[e]=function(){return this.$(s)}}}(this)(e,t));return n}}},modula["export"]("frames/jquery_query_module",e)}.call(this),function(){var t,e;t=modula.require("frames"),e={included:function(t){return this.broker=new Noted.Broker,t.addToConfigureChain("createEmitterAndReceiver")},createEmitterAndReceiver:function(){return this.broker=e.broker,this.emitter=new Noted.Emitter(this.broker,this),this.receiver=new Noted.Receiver(this.broker,this)},emit:function(t,e,r){return this.emitter.emit(t,e,r)},listen:function(t,e,r){return this.receiver.listen(t,e,r)},unsubscribe:function(t,e){return this.broker.unsubscribe(t,e,this)}},modula["export"]("frames/pub_sub_module",e)}.call(this),function(){var t,e={}.hasOwnProperty,r=function(t,r){function n(){this.constructor=t}for(var o in r)e.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};modula.require("frames"),t=window.Backbone,Frames.Model=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e}(t.Model),modula["export"]("frames/model",Frames.Model)}.call(this),function(){var t,e,r={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e=modula.require("frames"),t=window.Backbone,e.Router=function(r){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,r),o.prototype._bindRoutes=function(){return this.createEmitterAndReceiver(),t.Router.prototype._bindRoutes.call(this)},o.prototype.createEmitterAndReceiver=function(){return this.broker=e.PubSubModule.broker,this.emitter=new Noted.Emitter(this.broker,this),this.receiver=new Noted.Receiver(this.broker,this)},o.prototype.emit=function(t,e,r){return this.emitter.emit(t,e,r)},o.prototype.listen=function(t,e,r){return this.receiver.listen(t,e,r)},o.prototype.unsubscribe=function(t,e){return this.broker.unsubscribe(t,e,this)},o}(t.Router),modula["export"]("frames/router",e.Router)}.call(this),function(){var t,e,r,n,o,i={}.hasOwnProperty,s=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};e=modula.require("frames"),n=modula.require("frames/pub_sub_module"),r=modula.require("frames/jquery_query_module"),t=window.Backbone,o=t.View.prototype.remove,e.View=function(t){function e(t){var r,n,o,i;if(r=this.constructor.configureChain)for(o=0,i=r.length;i>o;o++)n=r[o],this[n].call(this,t);e.__super__.constructor.apply(this,arguments)}return s(e,t),e.addToConfigureChain=function(t){return null==this.configureChain&&(this.configureChain=[]),this.configureChain.push(t)},e.addToRemoveChain=function(t){return null==this.removeChain&&(this.removeChain=[]),this.removeChain.push(t)},e.include(n),e.include(r),e.prototype.remove=function(){var t,e,r,n;if(e=this.constructor.removeChain)for(r=0,n=e.length;n>r;r++)t=e[r],this[t].call(this);return o.call(this)},e}(t.View),modula["export"]("frames/view",e.View)}.call(this),function(){var t,e,r={}.hasOwnProperty,n=function(t,e){function n(){this.constructor=t}for(var o in e)r.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};t=modula.require("frames"),e=modula.require("frames/model"),t.ViewModel=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(e),modula["export"]("frames/view_model",t.ViewModel)}.call(this),function(){var t,e,r,n,o={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};e=modula.require("frames"),t=modula.require("frames/class"),n=modula.require("frames/state"),r=function(t){function r(){var t,r;this.__hooks={},this.__passedStages=["loaded"],e.createExtendables(),t={setReady:{from:"loaded",to:"ready"},setCreated:{from:"ready",to:"created"}},r=["loaded","ready","created"],this.stage=new n("loaded",{states:r,events:t}),this.stage.onReady=this.__stageTransition("ready",function(t){return function(){return e.start(),setTimeout(function(){return t.stage.setCreated()},0)}}(this)),this.stage.onCreated=this.__stageTransition("created"),this.__bindReady(this.setReady.bind(this))}return i(r,t),r.prototype.reset=function(){return this.__passedStages=["loaded"],this.stage.reset()},r.prototype.setReady=function(){return this.stage.setReady()},r.prototype.getStage=function(){return this.stage.get()},r.prototype.hook=function(t,e){var r;return null==(r=this.__hooks)[t]&&(r[t]=[]),this.__hooks[t].push(e),-1!==this.__passedStages.indexOf(t)?this.__call(e):void 0},r.prototype.__bindReady=function(t){return $(t)},r.prototype.__stageTransition=function(t,e){return function(r){return function(){return r.__passedStages.push(t),r.__callStage(t),"function"==typeof e?e():void 0}}(this)},r.prototype.__callStage=function(t){var e,r,n,o,i;if(this.__hooks[t]){for(o=this.__hooks[t],i=[],r=0,n=o.length;n>r;r++)e=o[r],i.push(this.__call(e));return i}},r.prototype.__call=function(t){return setTimeout(t,0)},r}(t),e.registerLauncher(r),modula["export"]("frames/launcher",r)}.call(this);